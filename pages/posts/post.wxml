<import src="post-item/post-item-template.wxml" />

<view>
  <swiper catchtap="onSwiperTap" vertical='{{false}}' indicator-dots="lalala" autoplay="{{true}}" interval="2000" duration="500">
    <swiper-item>
      <image catchtap="onSwiperItemTap" src="/images/a1.jpg" data-postId="1"></image>
    </swiper-item>
    <swiper-item>
      <image bindtap="onSwiperItemTap" src="/images/a2.jpg" data-postId="2"></image>
    </swiper-item>
    <swiper-item>
      <image src="/images/a3.jpg" data-postId="3"></image>
    </swiper-item>
  </swiper>
  <!-- block并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性。因为 wx:if 是一个控制属性，需要将它添加到一个标签上。如果要一次性判断多个组件标签，可以使用一个block标签将多个组件包装起来，并在上边使用 wx:if 控制属性。 -->
  <block wx:for="{{posts_key}}" wx:for-item="item">
    <!--template, template只是个占位符-->
    <!-- postid是由post.wxml中data-postId="{{item.postId}}"获得 -->
    <!-- dataset在组件中可以定义数据，这些数据将会通过事件传递给 SERVICE。 书写方式： 以data - 开头，多个单词由连字符 - 链接，不能有大写(大写会自动转成小写)如data- element - type，最终在 event.currentTarget.dataset 中会将连字符转成驼峰elementType -->
    <view catchtap="onPostTap" data-postId="{{item.postId}}">
      <template is="postItem" data="{{...item}}" />
    </view>
  </block>
</view>